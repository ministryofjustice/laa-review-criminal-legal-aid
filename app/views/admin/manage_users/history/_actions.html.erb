<% return unless user %>

<h2 class="govuk-heading-m">
  Actions
</h2>

<ul class="govuk-summary-list__actions-list govuk-!-padding-bottom-6">
  <% if user.activated? %>
    <% if user.awaiting_revival? %>
      <li class="govuk-summary-list__actions-list-item">
        <%= action_text(:awaiting_revival) %>
      </li>
    <% elsif user.dormant? %>
      <li class="govuk-summary-list__actions-list-item">
        <%= govuk_link_to action_text(:revive), edit_admin_manage_users_revive_user_path(id: user), { no_visited_state: true } %>
      </li>
    <% else  %>
      <li class="govuk-summary-list__actions-list-item">
        <%= govuk_link_to action_text(:deactivate), new_admin_manage_users_deactivated_user_path(id: user), { no_visited_state: true } %>
      </li>

      <% if FeatureFlags.basic_user_roles.enabled? %>
        <li class="govuk-summary-list__actions-list-item">
          <%= govuk_link_to action_text(:change_role), edit_admin_manage_users_change_role_path(id: user), { no_visited_state: true } %>
        </li>
      <% end %>
    <% end %>
  <% elsif user.deactivated? %>
    <li class="govuk-summary-list__actions-list-item">
      <%= govuk_link_to(
            user: user,
            text: action_text(:reactivate),
            path: confirm_reactivate_admin_manage_users_deactivated_user_path(user),
            html_options: { no_visited_state: true }
          )%>
    </li>
  <% elsif user.pending_activation? %>
    <% if user.invitation_expired? %>
      <li class="govuk-summary-list__actions-list-item">
        <%= govuk_link_to action_text(:renew), confirm_renew_admin_manage_users_invitation_path(user), { no_visited_state: true, class: 'xgovuk-button' } %>
      </li>
    <% end %>

    <li class="govuk-summary-list__actions-list-item">
      <%= govuk_link_to action_text(:delete), confirm_destroy_admin_manage_users_invitation_path(user), { no_visited_state: true, class: 'xgovuk-button xgovuk-button--secondary' } %>
    </li>
  <% end %>
</ul>
