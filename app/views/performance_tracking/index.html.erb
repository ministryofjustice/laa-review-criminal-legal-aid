<% title t('.page_title') %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-3">
      <%= t '.heading' %>
    </h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters govuk-!-margin-top-5">
    <%= govuk_warning_text text: warning_text(:experimental_data) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
  <%= govuk_table do |table| %>
    <%= table.with_caption(size: 'm', text: t('caseworker_report.caption')) %>
    <%= table.with_head do |head|
          head.with_row do |row|
            row.with_cell(text: thead_text(:user_name), header: true)
            row.with_cell(text: thead_text(:total_assigned_to_user), numeric: true, header: true)
            row.with_cell(text: thead_text(:total_unassigned_from_user), numeric: true, header: true)
            row.with_cell(text: thead_text(:total_closed_by_user), numeric: true, header: true)
          end
        end %>
    <%= table.with_body do |body|
          @caseworker_report.rows.each do |data_row|
            body.with_row do |row|
              row.with_cell(
                text: data_row.fetch(:user_name)
              )
              row.with_cell(
                text: data_row.fetch(:total_assigned_to_user),
                numeric: true
              )
              row.with_cell(
                text: data_row.fetch(:total_unassigned_from_user),
                numeric: true
              )
              row.with_cell(
                text: data_row.fetch(:total_closed_by_user),
                numeric: true
              )
            end
          end
        end %>
    <% end %>
  </div>
</div>
