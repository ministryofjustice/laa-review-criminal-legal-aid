<% title t('.page_title') %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <p class="govuk-body-l govuk-!-margin-bottom-2">
      <%= @crime_application.reference %>
    </p>

    <h2 class="govuk-heading-xl govuk-!-margin-bottom-4">
      <%= @crime_application.applicant_name %>
    </h2>

    <span class="govuk-tag govuk-tag--<%= t(@crime_application.status, scope: 'values.color') %> govuk-!-margin-bottom-6">
      <%= t(@crime_application.status, scope: 'values.status') %>
    </span>

    <%= render partial: 'current_assignment', locals: { crime_application: @crime_application } %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds govuk-!-margin-bottom-9">
    <%= render partial: 'shared/subnavigation', locals: { crime_application: @crime_application } %>
    <%= render partial: 'overview', object: @crime_application %>
    <%= render partial: 'client_details', object: @crime_application.client_details %>
    <%= render partial: 'case_details', object: @crime_application.case_details %>
    <%= render partial: 'offences', object: @crime_application.case_details.offences %>
    <%= render partial: 'codefendants', object: @crime_application.case_details.codefendants %>
    <%= render partial: 'interests_of_justice', object: @crime_application.interests_of_justice %>
    <%= render partial: 'provider_details', object: @crime_application.provider_details %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <% if @crime_application.current_assignment.assigned_to?(current_user_id) && @crime_application.status == 'submitted' %>
      <div class="govuk-button-group govuk-!-margin-bottom-6">
        <%= button_to t('calls_to_action.mark_complete'),
                      new_crime_application_return_path(@crime_application),
                      method: :post,
                      class: 'govuk-button govuk-button' %>
        <%= button_to t('calls_to_action.send_back'),
                      new_crime_application_return_path(@crime_application),
                      method: :get,
                      class: 'govuk-button govuk-button--warning' %>
        <%= button_to t('calls_to_action.unassign_from_self'),
                      assigned_application_path(@crime_application),
                      method: :delete,
                      class: 'govuk-button govuk-button--secondary' %>
      </div>
    <% end %>

    <p>
      <%= link_to t('.view_history'),
                  history_crime_application_path(@crime_application),
                  class: 'govuk-link--no-visited-state govuk-!-font-size-19' %>
    </p>
    <p>
      <%= link_to t('.view_your_list'),
                  assigned_applications_path,
                  class: 'govuk-link--no-visited-state govuk-!-font-size-19' %>
    </p>
  </div>
</div>
