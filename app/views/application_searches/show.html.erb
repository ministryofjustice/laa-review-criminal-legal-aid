<% title t('.page_title') %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full govuk-!-margin-bottom-5">
    <h1 class="govuk-heading-xl"><%=t '.heading' %></h1>
    <%= render @filter %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h2 class="govuk-heading-s">
      <%= t('.total', count: @search.total) %>
    </h2>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <table class="govuk-table app-dashboard-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th scope="col" class="govuk-table__header">
            <%= t('.table_headings.applicant_name') %>
          </th>
          <th scope="col" class="govuk-table__header">
            <%= t('.table_headings.reference') %>
          </th>
          <th scope="col" class="govuk-table__header">
            <%= t('.table_headings.received_at') %>
          </th>
          <th scope="col" class="govuk-table__header">
            <%= t('.table_headings.time_passed') %>
          </th>
          <th scope="col" class="govuk-table__header">
            <%= t(:common_platform, scope: 'crime_applications.labels') %>
          </th>
          <th scope="col" class="govuk-table__header">
            <%= t('.table_headings.caseworker') %>
          </th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <% @applications.each do |app| %>
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">
              <%= link_to app.applicant_name, crime_application_path(app) %>
            </th>
            <td class="govuk-table__cell">
              <%= app.reference %>
            </td>
            <td class="govuk-table__cell">
              <%= l(app.submitted_at) %>
            </td>
            <td class="govuk-table__cell">
              <%= t('crime_applications.values.days_passed', count: app.days_passed) %>
            </td>
            <td class="govuk-table__cell">
              <%= t(app.common_platform?, scope: 'crime_applications.values') %>
            </td>
            <td class="govuk-table__cell">
              <%= app.current_assignment.user_name if app.current_assignment.assigned? %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
