<% title t('.page_title') %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-3">
      <%= t '.heading' %>
    </h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <% @latest_temporal_reports.each do |report|%>
      <h3 class='govuk-heading-s'>
        <%= govuk_link_to(
              label_text(report.report_type),
              reporting_temporal_report_path(report.to_param),
              no_visited_state: true
            )%>
      </h3>
    <% end %>

    <% @snapshot_report_types.each do |report_type| %>
      <h3 class='govuk-heading-s'>
        <%= govuk_link_to(
              label_text(report_type),
              reporting_current_snapshot_path(report_type),
              no_visited_state: true
            ) %>
      </h3>

    <% end %>

    <h3 class='govuk-heading-s'>
      <%= govuk_link_to label_text('processed_report'), reporting_user_report_path('processed_report'), no_visited_state: true %>
    </h3>
  </div>
</div>

<% if current_user.can_download_reports? && @downloadable_reports.present? %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h2 class="govuk-heading-m">
        <%= t '.downloads' %>
      </h2>

      <% @downloadable_reports.group_by(&:report_type).each do |report_type, reports| %>
        <h3 class="govuk-heading-s">
          <%= label_text(report_type).pluralize %>
        </h3>
        <% reports.each do |report| %>
          <p class="govuk-body">
            <%= govuk_link_to(label_text('download_generated_report', interval: report.interval, period: report.period), reporting_download_generated_report_path(report), no_visited_state: true) %>
          </p>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
